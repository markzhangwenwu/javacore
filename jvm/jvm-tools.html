<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JVM å·¥å…· | JAVACORE</title>
    <meta name="description" content="Java æ•™ç¨‹">
    <meta name="generator" content="VuePress 1.4.0">
    <link rel="icon" href="/javacore/favicon.ico">
    
    <link rel="preload" href="/javacore/assets/css/0.styles.1dfebbd7.css" as="style"><link rel="preload" href="/javacore/assets/js/app.c30588b9.js" as="script"><link rel="preload" href="/javacore/assets/js/4.c9a192fb.js" as="script"><link rel="preload" href="/javacore/assets/js/60.40115a87.js" as="script"><link rel="preload" href="/javacore/assets/js/5.5c1b0512.js" as="script"><link rel="prefetch" href="/javacore/assets/js/10.eec41bdb.js"><link rel="prefetch" href="/javacore/assets/js/11.d1891260.js"><link rel="prefetch" href="/javacore/assets/js/12.3528efde.js"><link rel="prefetch" href="/javacore/assets/js/13.0e172202.js"><link rel="prefetch" href="/javacore/assets/js/14.a20b8bc9.js"><link rel="prefetch" href="/javacore/assets/js/15.fdd7e222.js"><link rel="prefetch" href="/javacore/assets/js/16.723f942b.js"><link rel="prefetch" href="/javacore/assets/js/17.2248e2ac.js"><link rel="prefetch" href="/javacore/assets/js/18.57bc468b.js"><link rel="prefetch" href="/javacore/assets/js/19.f2b0acaa.js"><link rel="prefetch" href="/javacore/assets/js/20.79dfc82c.js"><link rel="prefetch" href="/javacore/assets/js/21.a2b2b3d9.js"><link rel="prefetch" href="/javacore/assets/js/22.f68ead4a.js"><link rel="prefetch" href="/javacore/assets/js/23.10347421.js"><link rel="prefetch" href="/javacore/assets/js/24.2a123951.js"><link rel="prefetch" href="/javacore/assets/js/25.bb128b09.js"><link rel="prefetch" href="/javacore/assets/js/26.c428fa60.js"><link rel="prefetch" href="/javacore/assets/js/27.4ba85609.js"><link rel="prefetch" href="/javacore/assets/js/28.1eb43d6b.js"><link rel="prefetch" href="/javacore/assets/js/29.47750a72.js"><link rel="prefetch" href="/javacore/assets/js/30.855f22eb.js"><link rel="prefetch" href="/javacore/assets/js/31.8704a4a9.js"><link rel="prefetch" href="/javacore/assets/js/32.f619fe9a.js"><link rel="prefetch" href="/javacore/assets/js/33.f473cbd6.js"><link rel="prefetch" href="/javacore/assets/js/34.1f6ab2a5.js"><link rel="prefetch" href="/javacore/assets/js/35.4ba95da1.js"><link rel="prefetch" href="/javacore/assets/js/36.83801dff.js"><link rel="prefetch" href="/javacore/assets/js/37.48450ad3.js"><link rel="prefetch" href="/javacore/assets/js/38.2ddcdfe9.js"><link rel="prefetch" href="/javacore/assets/js/39.468dcde2.js"><link rel="prefetch" href="/javacore/assets/js/40.d38ab46c.js"><link rel="prefetch" href="/javacore/assets/js/41.3a8d5b7b.js"><link rel="prefetch" href="/javacore/assets/js/42.a399f7b8.js"><link rel="prefetch" href="/javacore/assets/js/43.d14d4985.js"><link rel="prefetch" href="/javacore/assets/js/44.7c5a3a7b.js"><link rel="prefetch" href="/javacore/assets/js/45.065f3db2.js"><link rel="prefetch" href="/javacore/assets/js/46.54993e19.js"><link rel="prefetch" href="/javacore/assets/js/47.1f466d0f.js"><link rel="prefetch" href="/javacore/assets/js/48.0580d278.js"><link rel="prefetch" href="/javacore/assets/js/49.6587dc2f.js"><link rel="prefetch" href="/javacore/assets/js/50.04a4013b.js"><link rel="prefetch" href="/javacore/assets/js/51.c8e61a81.js"><link rel="prefetch" href="/javacore/assets/js/52.e8c9e89b.js"><link rel="prefetch" href="/javacore/assets/js/53.175554ff.js"><link rel="prefetch" href="/javacore/assets/js/54.1c2a3cb9.js"><link rel="prefetch" href="/javacore/assets/js/55.4677c0e1.js"><link rel="prefetch" href="/javacore/assets/js/56.350c7496.js"><link rel="prefetch" href="/javacore/assets/js/57.eee026af.js"><link rel="prefetch" href="/javacore/assets/js/58.9fc5c657.js"><link rel="prefetch" href="/javacore/assets/js/59.ed81dbfe.js"><link rel="prefetch" href="/javacore/assets/js/6.490ec091.js"><link rel="prefetch" href="/javacore/assets/js/61.d255b511.js"><link rel="prefetch" href="/javacore/assets/js/62.034c22b4.js"><link rel="prefetch" href="/javacore/assets/js/63.0d42be12.js"><link rel="prefetch" href="/javacore/assets/js/7.6fea9814.js"><link rel="prefetch" href="/javacore/assets/js/8.74fdd0c9.js"><link rel="prefetch" href="/javacore/assets/js/9.8a2f0880.js"><link rel="prefetch" href="/javacore/assets/js/vendors~flowchart.3ce362cb.js"><link rel="prefetch" href="/javacore/assets/js/vendors~notification.96afd22b.js">
    <link rel="stylesheet" href="/javacore/assets/css/0.styles.1dfebbd7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/javacore/" class="home-link router-link-active"><img src="images/dunwu-logo-100.png" alt="JAVACORE" class="logo"> <span class="site-name can-hide">JAVACORE</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/javacore/basics/" class="nav-link">
  åŸºç¡€
</a></div><div class="nav-item"><a href="/javacore/advanced/" class="nav-link">
  é«˜çº§
</a></div><div class="nav-item"><a href="/javacore/container/" class="nav-link">
  å®¹å™¨
</a></div><div class="nav-item"><a href="/javacore/io/" class="nav-link">
  IO
</a></div><div class="nav-item"><a href="/javacore/concurrent/" class="nav-link">
  å¹¶å‘
</a></div><div class="nav-item"><a href="/javacore/jvm/" class="nav-link router-link-active">
  JVM
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">âœ¨ Javaç³»åˆ—</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/java-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java æ•™ç¨‹ ğŸ“š
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/javacore/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaCore æ•™ç¨‹ ğŸ“š
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/javacore/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaTech æ•™ç¨‹ ğŸ“š
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/spring-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring æ•™ç¨‹ ğŸ“š
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/spring-boot-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring Boot æ•™ç¨‹ ğŸ“š
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/dunwu/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ğŸ¯ åšå®¢
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/dunwu/javacore" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/javacore/basics/" class="nav-link">
  åŸºç¡€
</a></div><div class="nav-item"><a href="/javacore/advanced/" class="nav-link">
  é«˜çº§
</a></div><div class="nav-item"><a href="/javacore/container/" class="nav-link">
  å®¹å™¨
</a></div><div class="nav-item"><a href="/javacore/io/" class="nav-link">
  IO
</a></div><div class="nav-item"><a href="/javacore/concurrent/" class="nav-link">
  å¹¶å‘
</a></div><div class="nav-item"><a href="/javacore/jvm/" class="nav-link router-link-active">
  JVM
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">âœ¨ Javaç³»åˆ—</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/java-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java æ•™ç¨‹ ğŸ“š
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/javacore/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaCore æ•™ç¨‹ ğŸ“š
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/javacore/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaTech æ•™ç¨‹ ğŸ“š
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/spring-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring æ•™ç¨‹ ğŸ“š
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/spring-boot-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring Boot æ•™ç¨‹ ğŸ“š
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/dunwu/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ğŸ¯ åšå®¢
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/dunwu/javacore" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>JVM å·¥å…·</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/javacore/jvm/jvm-tools.html#å‘½ä»¤å·¥å…·" class="sidebar-link">å‘½ä»¤å·¥å…·</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javacore/jvm/jvm-tools.html#jps" class="sidebar-link">jps</a></li><li class="sidebar-sub-header"><a href="/javacore/jvm/jvm-tools.html#jstat" class="sidebar-link">jstat</a></li><li class="sidebar-sub-header"><a href="/javacore/jvm/jvm-tools.html#jmap" class="sidebar-link">jmap</a></li><li class="sidebar-sub-header"><a href="/javacore/jvm/jvm-tools.html#jstack" class="sidebar-link">jstack</a></li><li class="sidebar-sub-header"><a href="/javacore/jvm/jvm-tools.html#jhat" class="sidebar-link">jhat</a></li><li class="sidebar-sub-header"><a href="/javacore/jvm/jvm-tools.html#jinfo" class="sidebar-link">jinfo</a></li></ul></li><li><a href="/javacore/jvm/jvm-tools.html#ui-å·¥å…·" class="sidebar-link">UI å·¥å…·</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javacore/jvm/jvm-tools.html#jconsole" class="sidebar-link">jconsole</a></li><li class="sidebar-sub-header"><a href="/javacore/jvm/jvm-tools.html#jvisualvm" class="sidebar-link">jvisualvm</a></li><li class="sidebar-sub-header"><a href="/javacore/jvm/jvm-tools.html#mat" class="sidebar-link">MAT</a></li></ul></li><li><a href="/javacore/jvm/jvm-tools.html#å‚è€ƒèµ„æ–™" class="sidebar-link">å‚è€ƒèµ„æ–™</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="jvm-å·¥å…·"><a href="#jvm-å·¥å…·" class="header-anchor">#</a> JVM å·¥å…·</h1> <blockquote><p>Java ç¨‹åºå‘˜å…ä¸äº†æ•…éšœæ’æŸ¥å·¥ä½œï¼Œæ‰€ä»¥ç»å¸¸éœ€è¦ä½¿ç”¨ä¸€äº› JVM å·¥å…·ã€‚</p></blockquote> <h2 id="å‘½ä»¤å·¥å…·"><a href="#å‘½ä»¤å·¥å…·" class="header-anchor">#</a> å‘½ä»¤å·¥å…·</h2> <p>JDK è‡ªå¸¦äº†ä¸€äº›å®ç”¨çš„å‘½ä»¤è¡Œå·¥å…·æ¥ç›‘æ§ JVMã€‚</p> <table><thead><tr><th>åç§°</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>jps</code></td> <td>æ˜¾ç¤ºæŒ‡å®šç³»ç»Ÿå†…æ‰€æœ‰çš„ HotSpot è™šæ‹Ÿæœºè¿›ç¨‹ã€‚</td></tr> <tr><td><code>jstat</code></td> <td>ç”¨äºç›‘è§†è™šæ‹Ÿæœºè¿è¡Œæ—¶çŠ¶æ€ä¿¡æ¯ï¼Œå®ƒå¯ä»¥æ˜¾ç¤ºå‡ºè™šæ‹Ÿæœºè¿›ç¨‹ä¸­çš„ç±»è£…è½½ã€å†…å­˜ã€åƒåœ¾æ”¶é›†ã€JIT ç¼–è¯‘ç­‰è¿è¡Œæ•°æ®ã€‚</td></tr> <tr><td><code>jmap</code></td> <td>ç”¨äºç”Ÿæˆå †è½¬å‚¨å¿«ç…§ï¼ˆä¸€èˆ¬ç§°ä¸º heapdump æˆ– dump æ–‡ä»¶ï¼‰ã€‚</td></tr> <tr><td><code>jstack</code></td> <td>ç”¨äºç”Ÿæˆ java è™šæ‹Ÿæœºå½“å‰æ—¶åˆ»çš„çº¿ç¨‹å¿«ç…§ï¼ˆä¸€èˆ¬ç§°ä¸º threaddump æˆ– javacore æ–‡ä»¶ï¼‰ã€‚</td></tr> <tr><td><code>jhat</code></td> <td>ç”¨æ¥åˆ†æ jmap ç”Ÿæˆçš„ dump æ–‡ä»¶ã€‚</td></tr> <tr><td><code>jinfo</code></td> <td>ç”¨äºå®æ—¶æŸ¥çœ‹å’Œè°ƒæ•´è™šæ‹Ÿæœºè¿è¡Œå‚æ•°ã€‚</td></tr></tbody></table> <h3 id="jps"><a href="#jps" class="header-anchor">#</a> jps</h3> <blockquote><p><strong>jps(JVM Process Status Tool) æ˜¯è™šæ‹Ÿæœºè¿›ç¨‹çŠ¶æ€å·¥å…·</strong>ã€‚å®ƒå¯ä»¥æ˜¾ç¤ºæŒ‡å®šç³»ç»Ÿå†…æ‰€æœ‰çš„ HotSpot è™šæ‹Ÿæœºè¿›ç¨‹çŠ¶æ€ä¿¡æ¯ã€‚jps é€šè¿‡ RMI åè®®æŸ¥è¯¢å¼€å¯äº† RMI æœåŠ¡çš„è¿œç¨‹è™šæ‹Ÿæœºè¿›ç¨‹çŠ¶æ€ã€‚</p></blockquote> <p>å‘½ä»¤æ ¼å¼ï¼š</p> <div class="language-shell extra-class"><pre class="language-shell"><code>jps <span class="token punctuation">[</span>option<span class="token punctuation">]</span> <span class="token punctuation">[</span>hostid<span class="token punctuation">]</span>
</code></pre></div><p>å¦‚æœä¸æŒ‡å®š hostid å°±é»˜è®¤ä¸ºå½“å‰ä¸»æœºæˆ–æœåŠ¡å™¨ã€‚</p> <p>å¸¸ç”¨å‚æ•°ï¼š</p> <ul><li><code>option</code> - é€‰é¡¹å‚æ•°
<ul><li><code>-l</code> - è¾“å‡ºä¸»ç±»çš„å…¨åï¼Œå¦‚æœè¿›ç¨‹æ‰§è¡Œçš„æ˜¯ jar åŒ…ï¼Œè¾“å‡º jar è·¯å¾„</li> <li><code>-m</code> - è¾“å‡º JVM å¯åŠ¨æ—¶ä¼ é€’ç»™ main() çš„å‚æ•°</li> <li><code>-q</code> - åªè¾“å‡º LVMIDï¼Œçœç•¥ä¸»ç±»çš„åç§°</li> <li><code>-v</code> - è¾“å‡º JVM å¯åŠ¨æ—¶æ˜¾ç¤ºæŒ‡å®šçš„ JVM å‚æ•°</li></ul></li> <li><code>hostid</code> - RMI æ³¨å†Œè¡¨ä¸­æ³¨å†Œçš„ä¸»æœºåã€‚å¦‚æœä¸æŒ‡å®š hostid å°±é»˜è®¤ä¸ºå½“å‰ä¸»æœºæˆ–æœåŠ¡å™¨ã€‚</li></ul> <p>å…¶ä¸­[option]ã€[hostid]å‚æ•°ä¹Ÿå¯ä»¥ä¸å†™ã€‚</p> <p>ã€ç¤ºä¾‹ã€‘</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ jps -l -m
<span class="token number">28920</span> org.apache.catalina.startup.Bootstrap start
<span class="token number">11589</span> org.apache.catalina.startup.Bootstrap start
<span class="token number">25816</span> sun.tools.jps.Jps -l -m
</code></pre></div><h3 id="jstat"><a href="#jstat" class="header-anchor">#</a> jstat</h3> <blockquote><p><strong>jstat(JVM statistics Monitoring)ï¼Œæ˜¯è™šæ‹Ÿæœºç»Ÿè®¡ä¿¡æ¯ç›‘è§†å·¥å…·</strong>ã€‚jstat ç”¨äºç›‘è§†è™šæ‹Ÿæœºè¿è¡Œæ—¶çŠ¶æ€ä¿¡æ¯ï¼Œå®ƒå¯ä»¥æ˜¾ç¤ºå‡ºè™šæ‹Ÿæœºè¿›ç¨‹ä¸­çš„ç±»è£…è½½ã€å†…å­˜ã€åƒåœ¾æ”¶é›†ã€JIT ç¼–è¯‘ç­‰è¿è¡Œæ•°æ®ã€‚</p></blockquote> <p>å‘½ä»¤æ ¼å¼ï¼š</p> <div class="language-shell extra-class"><pre class="language-shell"><code>jstat <span class="token punctuation">[</span>option<span class="token punctuation">]</span> VMID <span class="token punctuation">[</span>interval<span class="token punctuation">]</span> <span class="token punctuation">[</span>count<span class="token punctuation">]</span>
</code></pre></div><p>å¸¸ç”¨å‚æ•°ï¼š</p> <ul><li><code>option</code> - é€‰é¡¹å‚æ•°ï¼Œç”¨äºæŒ‡å®šç”¨æˆ·éœ€è¦æŸ¥è¯¢çš„è™šæ‹Ÿæœºä¿¡æ¯
<ul><li><code>-class</code> - ç›‘è§†ç±»è£…è½½ã€å¸è½½æ•°é‡ã€æ€»ç©ºé—´ä»¥åŠç±»è£…è½½æ‰€è€—è´¹çš„æ—¶é—´</li> <li><code>-gc</code> - ç›‘è§† Java å †çŠ¶å†µï¼ŒåŒ…æ‹¬ Eden åŒºã€ä¸¤ä¸ª survivor åŒºã€è€å¹´ä»£ã€æ°¸ä¹…ä»£ç­‰åŒºçš„å®¹é‡ã€å·²ç”¨ç©ºé—´ã€GC æ—¶é—´åˆè®¡ç­‰ä¿¡æ¯ã€‚</li></ul></li> <li><code>VMID</code> - å¦‚æœæ˜¯æœ¬åœ°è™šæ‹Ÿæœºè¿›ç¨‹ï¼Œåˆ™ VMID ä¸ LVMID æ˜¯ä¸€è‡´çš„ï¼›å¦‚æœæ˜¯è¿œç¨‹è™šæ‹Ÿæœºè¿›ç¨‹ï¼Œé‚£ VMID çš„æ ¼å¼åº”å½“æ˜¯ï¼š<code>[protocol:][//]lvmid[@hostname[:port]/servername]</code></li> <li><code>interval</code> - æŸ¥è¯¢é—´éš”</li> <li><code>count</code> - æŸ¥è¯¢æ¬¡æ•°</li></ul> <blockquote><p>ã€å‚è€ƒã€‘æ›´è¯¦ç»†è¯´æ˜å¯ä»¥å‚è€ƒï¼š<a href="https://www.cnblogs.com/yjd_hycf_space/p/7755633.html" target="_blank" rel="noopener noreferrer">jstat å‘½ä»¤æŸ¥çœ‹ jvm çš„ GC æƒ…å†µ<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <h4 id="ç±»åŠ è½½ç»Ÿè®¡"><a href="#ç±»åŠ è½½ç»Ÿè®¡" class="header-anchor">#</a> ç±»åŠ è½½ç»Ÿè®¡</h4> <p>ä½¿ç”¨ <code>jstat -class pid</code> å‘½ä»¤å¯ä»¥æŸ¥çœ‹ç¼–è¯‘ç»Ÿè®¡ä¿¡æ¯ã€‚</p> <p>ã€ç¤ºä¾‹ã€‘</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ jstat -class <span class="token number">7129</span>
Loaded  Bytes  Unloaded  Bytes     Time
 <span class="token number">26749</span> <span class="token number">50405.3</span>      <span class="token number">873</span>  <span class="token number">1216.8</span>      <span class="token number">19.75</span>
</code></pre></div><p>ã€å‚æ•°ã€‘</p> <ul><li>Loaded - åŠ è½½ class çš„æ•°é‡</li> <li>Bytes - æ‰€å ç”¨ç©ºé—´å¤§å°</li> <li>Unloaded - æœªåŠ è½½æ•°é‡</li> <li>Bytes - æœªåŠ è½½å ç”¨ç©ºé—´</li> <li>Time - æ—¶é—´</li></ul> <h4 id="ç¼–è¯‘ç»Ÿè®¡"><a href="#ç¼–è¯‘ç»Ÿè®¡" class="header-anchor">#</a> ç¼–è¯‘ç»Ÿè®¡</h4> <p>ä½¿ç”¨ <code>jstat -compiler pid</code> å‘½ä»¤å¯ä»¥æŸ¥çœ‹ç¼–è¯‘ç»Ÿè®¡ä¿¡æ¯ã€‚</p> <p>ã€ç¤ºä¾‹ã€‘</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ jstat -compiler <span class="token number">7129</span>
Compiled Failed Invalid   Time   FailedType FailedMethod
   <span class="token number">42030</span>      <span class="token number">2</span>       <span class="token number">0</span>   <span class="token number">302.53</span>          <span class="token number">1</span> org/apache/felix/framework/BundleWiringImpl<span class="token variable">$BundleClassLoader</span> findClass
</code></pre></div><p>ã€å‚æ•°ã€‘</p> <ul><li>Compiled - ç¼–è¯‘æ•°é‡</li> <li>Failed - å¤±è´¥æ•°é‡</li> <li>Invalid - ä¸å¯ç”¨æ•°é‡</li> <li>Time - æ—¶é—´</li> <li>FailedType - å¤±è´¥ç±»å‹</li> <li>FailedMethod - å¤±è´¥çš„æ–¹æ³•</li></ul> <h4 id="gc-ç»Ÿè®¡"><a href="#gc-ç»Ÿè®¡" class="header-anchor">#</a> GC ç»Ÿè®¡</h4> <p>ä½¿ç”¨ <code>jstat -gc pid time</code> å‘½ä»¤å¯ä»¥æŸ¥çœ‹ GC ç»Ÿè®¡ä¿¡æ¯ã€‚</p> <p>ã€ç¤ºä¾‹ã€‘</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ jstat -gc <span class="token number">29527</span> <span class="token number">200</span> <span class="token number">5</span>
 S0C    S1C    S0U    S1U      EC       EU        OC         OU       MC     MU    CCSC   CCSU   YGC     YGCT    FGC    FGCT     GCT
<span class="token number">22528.0</span> <span class="token number">22016.0</span>  <span class="token number">0.0</span>   <span class="token number">21388.2</span> <span class="token number">4106752.0</span> <span class="token number">921244.7</span> <span class="token number">5592576.0</span>  <span class="token number">2086826.5</span>  <span class="token number">110716.0</span> <span class="token number">103441.1</span> <span class="token number">12416.0</span> <span class="token number">11167.7</span>   <span class="token number">3189</span>   <span class="token number">90.057</span>  <span class="token number">10</span>      <span class="token number">2.140</span>   <span class="token number">92.197</span>
<span class="token number">22528.0</span> <span class="token number">22016.0</span>  <span class="token number">0.0</span>   <span class="token number">21388.2</span> <span class="token number">4106752.0</span> <span class="token number">921244.7</span> <span class="token number">5592576.0</span>  <span class="token number">2086826.5</span>  <span class="token number">110716.0</span> <span class="token number">103441.1</span> <span class="token number">12416.0</span> <span class="token number">11167.7</span>   <span class="token number">3189</span>   <span class="token number">90.057</span>  <span class="token number">10</span>      <span class="token number">2.140</span>   <span class="token number">92.197</span>
<span class="token number">22528.0</span> <span class="token number">22016.0</span>  <span class="token number">0.0</span>   <span class="token number">21388.2</span> <span class="token number">4106752.0</span> <span class="token number">921244.7</span> <span class="token number">5592576.0</span>  <span class="token number">2086826.5</span>  <span class="token number">110716.0</span> <span class="token number">103441.1</span> <span class="token number">12416.0</span> <span class="token number">11167.7</span>   <span class="token number">3189</span>   <span class="token number">90.057</span>  <span class="token number">10</span>      <span class="token number">2.140</span>   <span class="token number">92.197</span>
<span class="token number">22528.0</span> <span class="token number">22016.0</span>  <span class="token number">0.0</span>   <span class="token number">21388.2</span> <span class="token number">4106752.0</span> <span class="token number">921244.7</span> <span class="token number">5592576.0</span>  <span class="token number">2086826.5</span>  <span class="token number">110716.0</span> <span class="token number">103441.1</span> <span class="token number">12416.0</span> <span class="token number">11167.7</span>   <span class="token number">3189</span>   <span class="token number">90.057</span>  <span class="token number">10</span>      <span class="token number">2.140</span>   <span class="token number">92.197</span>
<span class="token number">22528.0</span> <span class="token number">22016.0</span>  <span class="token number">0.0</span>   <span class="token number">21388.2</span> <span class="token number">4106752.0</span> <span class="token number">921244.7</span> <span class="token number">5592576.0</span>  <span class="token number">2086826.5</span>  <span class="token number">110716.0</span> <span class="token number">103441.1</span> <span class="token number">12416.0</span> <span class="token number">11167.7</span>   <span class="token number">3189</span>   <span class="token number">90.057</span>  <span class="token number">10</span>      <span class="token number">2.140</span>   <span class="token number">92.197</span>
</code></pre></div><p>ã€å‚æ•°ã€‘</p> <ul><li><code>S0C</code> - ç¬¬ä¸€ä¸ª Survivor åŒºçš„å¤§å°</li> <li><code>S1C</code> - ç¬¬äºŒä¸ª Survivor åŒºçš„å¤§å°</li> <li><code>S0U</code> - ç¬¬ä¸€ä¸ª Survivor åŒºçš„ä½¿ç”¨å¤§å°</li> <li><code>S1U</code> - ç¬¬äºŒä¸ª Survivor åŒºçš„ä½¿ç”¨å¤§å°</li> <li><code>EC</code> - Eden åŒºçš„å¤§å°</li> <li><code>EU</code> - Eden åŒºçš„ä½¿ç”¨å¤§å°</li> <li><code>TT</code> - å¯¹è±¡åœ¨æ–°ç”Ÿä»£å­˜æ´»çš„æ¬¡æ•°</li> <li><code>MTT</code> - å¯¹è±¡åœ¨æ–°ç”Ÿä»£å­˜æ´»çš„æœ€å¤§æ¬¡æ•°</li> <li><code>DSS</code> - æœŸæœ›çš„ Survivor åŒºçš„å¤§å°</li> <li><code>YGC</code> - å¹´è½»ä»£åƒåœ¾å›æ”¶æ¬¡æ•°</li> <li><code>YGCT</code> - å¹´è½»ä»£åƒåœ¾å›æ”¶æ¶ˆè€—æ—¶é—´</li></ul> <h3 id="jmap"><a href="#jmap" class="header-anchor">#</a> jmap</h3> <blockquote><p><strong>jmap(JVM Memory Map) æ˜¯ Java å†…å­˜æ˜ åƒå·¥å…·</strong>ã€‚jmap ç”¨äºç”Ÿæˆå †è½¬å‚¨å¿«ç…§ï¼ˆä¸€èˆ¬ç§°ä¸º heapdump æˆ– dump æ–‡ä»¶ï¼‰ã€‚jmap ä¸ä»…èƒ½ç”Ÿæˆ dump æ–‡ä»¶ï¼Œè¿˜å¯ä»¥æŸ¥è¯¢ <code>finalize</code> æ‰§è¡Œé˜Ÿåˆ—ã€Java å †å’Œæ°¸ä¹…ä»£çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¦‚å½“å‰ä½¿ç”¨ç‡ã€å½“å‰ä½¿ç”¨çš„æ˜¯å“ªç§æ”¶é›†å™¨ç­‰ã€‚</p> <p>å¦‚æœä¸ä½¿ç”¨è¿™ä¸ªå‘½ä»¤ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ <code>-XX:+HeapDumpOnOutOfMemoryError</code> å‚æ•°æ¥è®©è™šæ‹Ÿæœºå‡ºç° OOM çš„æ—¶å€™ï¼Œè‡ªåŠ¨ç”Ÿæˆ dump æ–‡ä»¶ã€‚</p></blockquote> <p>å‘½ä»¤æ ¼å¼ï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>jmap [option] VMID
</code></pre></div><p>å¸¸ç”¨å‚æ•°ï¼š</p> <ul><li><code>option</code> - é€‰é¡¹å‚æ•°
<ul><li><code>-dump</code> - ç”Ÿæˆå †è½¬å‚¨å¿«ç…§</li> <li><code>-finalizerinfo</code> - æ˜¾ç¤ºåœ¨ F-Queue é˜Ÿåˆ—ç­‰å¾… Finalizer çº¿ç¨‹æ‰§è¡Œ finalizer æ–¹æ³•çš„å¯¹è±¡</li> <li><code>-heap</code> - æ˜¾ç¤º Java å †è¯¦ç»†ä¿¡æ¯</li> <li><code>-histo</code> - æ˜¾ç¤ºå †ä¸­å¯¹è±¡çš„ç»Ÿè®¡ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç±»ã€å®ä¾‹æ•°é‡ã€åˆè®¡å®¹é‡</li> <li><code>-permstat</code> - to print permanent generation statistics</li> <li><code>-F</code> - å½“-dump æ²¡æœ‰å“åº”æ—¶ï¼Œå¼ºåˆ¶ç”Ÿæˆ dump å¿«ç…§</li></ul></li></ul> <p>ã€ç¤ºä¾‹ã€‘</p> <p><strong>ï¼ˆ1ï¼‰ç”Ÿæˆ heapdump å¿«ç…§</strong></p> <p>dump å †åˆ°æ–‡ä»¶ï¼Œformat æŒ‡å®šè¾“å‡ºæ ¼å¼ï¼Œlive æŒ‡æ˜æ˜¯æ´»ç€çš„å¯¹è±¡ï¼Œfile æŒ‡å®šæ–‡ä»¶å</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ jmap -dump:live,format<span class="token operator">=</span>b,file<span class="token operator">=</span>dump.hprof <span class="token number">28920</span>
Dumping heap to /home/xxx/dump.hprof <span class="token punctuation">..</span>.
Heap dump <span class="token function">file</span> created
</code></pre></div><p>dump.hprof è¿™ä¸ªåç¼€æ˜¯ä¸ºäº†åç»­å¯ä»¥ç›´æ¥ç”¨ MAT(Memory Anlysis Tool)ç­‰å·¥å…·æ‰“å¼€ã€‚</p> <p><strong>ï¼ˆ2ï¼‰æŸ¥çœ‹å®ä¾‹æ•°æœ€å¤šçš„ç±»</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ jmap -histo <span class="token number">29527</span> <span class="token operator">|</span> <span class="token function">head</span> -n <span class="token number">6</span>

 num     <span class="token comment">#instances         #bytes  class name</span>
----------------------------------------------
   <span class="token number">1</span>:      <span class="token number">13673280</span>     <span class="token number">1438961864</span>  <span class="token punctuation">[</span>C
   <span class="token number">2</span>:       <span class="token number">1207166</span>      <span class="token number">411277184</span>  <span class="token punctuation">[</span>I
   <span class="token number">3</span>:       <span class="token number">7382322</span>      <span class="token number">347307096</span>  <span class="token punctuation">[</span>Ljava.lang.Object<span class="token punctuation">;</span>
</code></pre></div><p><strong>ï¼ˆ3ï¼‰ æŸ¥çœ‹æŒ‡å®šè¿›ç¨‹çš„å †ä¿¡æ¯</strong></p> <p>æ³¨æ„ï¼šä½¿ç”¨ CMS GC æƒ…å†µä¸‹ï¼Œ<code>jmap -heap PID</code> çš„æ‰§è¡Œæœ‰å¯èƒ½ä¼šå¯¼è‡´ java è¿›ç¨‹æŒ‚èµ·ã€‚</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ ./jmap -heap <span class="token number">12379</span>
Attaching to process ID <span class="token number">12379</span>, please wait<span class="token punctuation">..</span>.
Debugger attached successfully.
Server compiler detected.
JVM version is <span class="token number">17.0</span>-b16

using thread-local object allocation.
Parallel GC with <span class="token number">6</span> thread<span class="token punctuation">(</span>s<span class="token punctuation">)</span>

Heap Configuration:
   MinHeapFreeRatio <span class="token operator">=</span> <span class="token number">40</span>
   MaxHeapFreeRatio <span class="token operator">=</span> <span class="token number">70</span>
   MaxHeapSize      <span class="token operator">=</span> <span class="token number">83886080</span> <span class="token punctuation">(</span><span class="token number">80</span>.0MB<span class="token punctuation">)</span>
   NewSize          <span class="token operator">=</span> <span class="token number">1310720</span> <span class="token punctuation">(</span><span class="token number">1</span>.25MB<span class="token punctuation">)</span>
   MaxNewSize       <span class="token operator">=</span> <span class="token number">17592186044415</span> MB
   OldSize          <span class="token operator">=</span> <span class="token number">5439488</span> <span class="token punctuation">(</span><span class="token number">5</span>.1875MB<span class="token punctuation">)</span>
   NewRatio         <span class="token operator">=</span> <span class="token number">2</span>
   SurvivorRatio    <span class="token operator">=</span> <span class="token number">8</span>
   PermSize         <span class="token operator">=</span> <span class="token number">20971520</span> <span class="token punctuation">(</span><span class="token number">20</span>.0MB<span class="token punctuation">)</span>
   MaxPermSize      <span class="token operator">=</span> <span class="token number">88080384</span> <span class="token punctuation">(</span><span class="token number">84</span>.0MB<span class="token punctuation">)</span>

Heap Usage:
PS Young Generation
Eden Space:
   capacity <span class="token operator">=</span> <span class="token number">9306112</span> <span class="token punctuation">(</span><span class="token number">8</span>.875MB<span class="token punctuation">)</span>
   used     <span class="token operator">=</span> <span class="token number">5375360</span> <span class="token punctuation">(</span><span class="token number">5</span>.1263427734375MB<span class="token punctuation">)</span>
   <span class="token function">free</span>     <span class="token operator">=</span> <span class="token number">3930752</span> <span class="token punctuation">(</span><span class="token number">3</span>.7486572265625MB<span class="token punctuation">)</span>
   <span class="token number">57.761608714788736</span>% used
From Space:
   capacity <span class="token operator">=</span> <span class="token number">9306112</span> <span class="token punctuation">(</span><span class="token number">8</span>.875MB<span class="token punctuation">)</span>
   used     <span class="token operator">=</span> <span class="token number">3425240</span> <span class="token punctuation">(</span><span class="token number">3</span>.2665634155273438MB<span class="token punctuation">)</span>
   <span class="token function">free</span>     <span class="token operator">=</span> <span class="token number">5880872</span> <span class="token punctuation">(</span><span class="token number">5</span>.608436584472656MB<span class="token punctuation">)</span>
   <span class="token number">36.80634834397007</span>% used
To Space:
   capacity <span class="token operator">=</span> <span class="token number">9306112</span> <span class="token punctuation">(</span><span class="token number">8</span>.875MB<span class="token punctuation">)</span>
   used     <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">(</span><span class="token number">0</span>.0MB<span class="token punctuation">)</span>
   <span class="token function">free</span>     <span class="token operator">=</span> <span class="token number">9306112</span> <span class="token punctuation">(</span><span class="token number">8</span>.875MB<span class="token punctuation">)</span>
   <span class="token number">0.0</span>% used
PS Old Generation
   capacity <span class="token operator">=</span> <span class="token number">55967744</span> <span class="token punctuation">(</span><span class="token number">53</span>.375MB<span class="token punctuation">)</span>
   used     <span class="token operator">=</span> <span class="token number">48354640</span> <span class="token punctuation">(</span><span class="token number">46</span>.11457824707031MB<span class="token punctuation">)</span>
   <span class="token function">free</span>     <span class="token operator">=</span> <span class="token number">7613104</span> <span class="token punctuation">(</span><span class="token number">7</span>.2604217529296875MB<span class="token punctuation">)</span>
   <span class="token number">86.39733629427693</span>% used
PS Perm Generation
   capacity <span class="token operator">=</span> <span class="token number">62062592</span> <span class="token punctuation">(</span><span class="token number">59</span>.1875MB<span class="token punctuation">)</span>
   used     <span class="token operator">=</span> <span class="token number">60243112</span> <span class="token punctuation">(</span><span class="token number">57</span>.452308654785156MB<span class="token punctuation">)</span>
   <span class="token function">free</span>     <span class="token operator">=</span> <span class="token number">1819480</span> <span class="token punctuation">(</span><span class="token number">1</span>.7351913452148438MB<span class="token punctuation">)</span>
   <span class="token number">97.06831451706046</span>% used
</code></pre></div><h3 id="jstack"><a href="#jstack" class="header-anchor">#</a> jstack</h3> <blockquote><p><strong>jstack(Stack Trace for java) æ˜¯ Java å †æ ˆè·Ÿè¸ªå·¥å…·</strong>ã€‚jstack ç”¨äºç”Ÿæˆ java è™šæ‹Ÿæœºå½“å‰æ—¶åˆ»çš„çº¿ç¨‹å¿«ç…§ï¼ˆä¸€èˆ¬ç§°ä¸º threaddump æˆ– javacore æ–‡ä»¶ï¼‰ã€‚</p> <p><strong>çº¿ç¨‹å¿«ç…§æ˜¯å½“å‰è™šæ‹Ÿæœºå†…æ¯ä¸€æ¡çº¿ç¨‹æ­£åœ¨æ‰§è¡Œçš„æ–¹æ³•å †æ ˆçš„é›†åˆï¼Œç”Ÿæˆçº¿ç¨‹å¿«ç…§çš„ä¸»è¦ç›®çš„æ˜¯å®šä½çº¿ç¨‹å‡ºç°é•¿æ—¶é—´åœé¡¿çš„åŸå› ï¼Œå¦‚çº¿ç¨‹é—´æ­»é”ã€æ­»å¾ªç¯ã€è¯·æ±‚å¤–éƒ¨èµ„æºå¯¼è‡´çš„é•¿æ—¶é—´ç­‰å¾…ç­‰</strong>ã€‚</p></blockquote> <p>çº¿ç¨‹å‡ºç°åœé¡¿çš„æ—¶å€™é€šè¿‡ jstack æ¥æŸ¥çœ‹å„ä¸ªçº¿ç¨‹çš„è°ƒç”¨å †æ ˆï¼Œå°±å¯ä»¥çŸ¥é“æ²¡æœ‰å“åº”çš„çº¿ç¨‹åˆ°åº•åœ¨åå°åšä»€ä¹ˆäº‹æƒ…ï¼Œæˆ–è€…ç­‰å¾…ä»€ä¹ˆèµ„æºã€‚ å¦‚æœ java ç¨‹åºå´©æºƒç”Ÿæˆ core æ–‡ä»¶ï¼Œjstack å·¥å…·å¯ä»¥ç”¨æ¥è·å¾— core æ–‡ä»¶çš„ java stack å’Œ native stack çš„ä¿¡æ¯ï¼Œä»è€Œå¯ä»¥è½»æ¾åœ°çŸ¥é“ java ç¨‹åºæ˜¯å¦‚ä½•å´©æºƒå’Œåœ¨ç¨‹åºä½•å¤„å‘ç”Ÿé—®é¢˜ã€‚å¦å¤–ï¼Œjstack å·¥å…·è¿˜å¯ä»¥é™„å±åˆ°æ­£åœ¨è¿è¡Œçš„ java ç¨‹åºä¸­ï¼Œçœ‹åˆ°å½“æ—¶è¿è¡Œçš„ java ç¨‹åºçš„ java stack å’Œ native stack çš„ä¿¡æ¯, å¦‚æœç°åœ¨è¿è¡Œçš„ java ç¨‹åºå‘ˆç° hung çš„çŠ¶æ€ï¼Œjstack æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚</p> <p>å‘½ä»¤æ ¼å¼ï¼š</p> <div class="language-shell extra-class"><pre class="language-shell"><code>jstack <span class="token punctuation">[</span>option<span class="token punctuation">]</span> vmid
</code></pre></div><p>å¸¸ç”¨å‚æ•°ï¼š</p> <ul><li><code>option</code> - é€‰é¡¹å‚æ•°
<ul><li><code>-F</code> - å½“æ­£å¸¸è¾“å‡ºè¯·æ±‚ä¸è¢«å“åº”æ—¶ï¼Œå¼ºåˆ¶è¾“å‡ºçº¿ç¨‹å †æ ˆ</li> <li><code>-l</code> - é™¤å †æ ˆå¤–ï¼Œæ˜¾ç¤ºå…³äºé”çš„é™„åŠ ä¿¡æ¯</li> <li><code>-m</code> - å¦‚æœè°ƒç”¨åˆ°æœ¬åœ°æ–¹æ³•çš„è¯ï¼Œå¯ä»¥æ˜¾ç¤º C/C++çš„å †æ ˆ</li></ul></li></ul> <p>ã€ç¤ºä¾‹ã€‘</p> <p>ï¼ˆ1ï¼‰æ‰¾å‡ºæŸ Java è¿›ç¨‹ä¸­æœ€è€—è´¹ CPU çš„ Java çº¿ç¨‹</p> <p>a) æ‰¾å‡º Java è¿›ç¨‹</p> <p>å‡è®¾åº”ç”¨åç§°ä¸º myappï¼š</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ jps <span class="token operator">|</span> <span class="token function">grep</span> myapp
<span class="token number">29527</span> myapp.jar
</code></pre></div><p>å¾—åˆ°è¿›ç¨‹ ID ä¸º 21711</p> <p>b) æ‰¾å‡ºè¯¥è¿›ç¨‹å†…æœ€è€—è´¹ CPU çš„çº¿ç¨‹ï¼Œå¯ä»¥ä½¿ç”¨ <code>ps -Lfp pid</code> æˆ–è€… <code>ps -mp pid -o THREAD, tid, time</code> æˆ–è€… <code>top -Hp pid</code></p> <p><img src="http://static.oschina.net/uploads/space/2014/0128/170402_A57i_111708.png" alt="img">
TIME åˆ—å°±æ˜¯å„ä¸ª Java çº¿ç¨‹è€—è´¹çš„ CPU æ—¶é—´ï¼ŒCPU æ—¶é—´æœ€é•¿çš„æ˜¯çº¿ç¨‹ ID ä¸º 21742 çš„çº¿ç¨‹ï¼Œç”¨</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">printf</span> <span class="token string">&quot;%x<span class="token entity" title="\n">\n</span>&quot;</span> <span class="token number">21742</span>
</code></pre></div><p>å¾—åˆ° 21742 çš„åå…­è¿›åˆ¶å€¼ä¸º 54eeï¼Œä¸‹é¢ä¼šç”¨åˆ°ã€‚</p> <p>c) ä½¿ç”¨ jstack æ‰“å°çº¿ç¨‹å †æ ˆä¿¡æ¯</p> <p>ä¸‹ä¸€æ­¥ç»ˆäºè½®åˆ° jstack ä¸Šåœºäº†ï¼Œå®ƒç”¨æ¥è¾“å‡ºè¿›ç¨‹ 21711 çš„å †æ ˆä¿¡æ¯ï¼Œç„¶åæ ¹æ®çº¿ç¨‹ ID çš„åå…­è¿›åˆ¶å€¼ grepï¼Œå¦‚ä¸‹ï¼š</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ jstack <span class="token number">21711</span> <span class="token operator">|</span> <span class="token function">grep</span> 54ee
<span class="token string">&quot;PollIntervalRetrySchedulerThread&quot;</span> <span class="token assign-left variable">prio</span><span class="token operator">=</span><span class="token number">10</span> <span class="token assign-left variable">tid</span><span class="token operator">=</span>0x00007f950043e000 <span class="token assign-left variable">nid</span><span class="token operator">=</span>0x54ee <span class="token keyword">in</span> Object.wait<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">[</span>0x00007f94c6eda000<span class="token punctuation">]</span>
</code></pre></div><p>å¯ä»¥çœ‹åˆ° CPU æ¶ˆè€—åœ¨ PollIntervalRetrySchedulerThread è¿™ä¸ªç±»çš„ Object.wait()ï¼Œæˆ‘æ‰¾äº†ä¸‹æˆ‘çš„ä»£ç ï¼Œå®šä½åˆ°ä¸‹é¢çš„ä»£ç ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// Idle wait</span>
<span class="token function">getLog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;Thread [&quot;</span> <span class="token operator">+</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;] is idle waiting...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
schedulerThreadState <span class="token operator">=</span> <span class="token class-name">PollTaskSchedulerThreadState</span><span class="token punctuation">.</span><span class="token class-name">IdleWaiting</span><span class="token punctuation">;</span>
<span class="token keyword">long</span> now <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">long</span> waitTime <span class="token operator">=</span> now <span class="token operator">+</span> <span class="token function">getIdleWaitTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">long</span> timeUntilContinue <span class="token operator">=</span> waitTime <span class="token operator">-</span> now<span class="token punctuation">;</span>
<span class="token keyword">synchronized</span><span class="token punctuation">(</span>sigLock<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">try</span> <span class="token punctuation">{</span>
    	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>halted<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    		sigLock<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span>timeUntilContinue<span class="token punctuation">)</span><span class="token punctuation">;</span>
    	<span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
	<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> ignore<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å®ƒæ˜¯è½®è¯¢ä»»åŠ¡çš„ç©ºé—²ç­‰å¾…ä»£ç ï¼Œä¸Šé¢çš„ sigLock.wait(timeUntilContinue) å°±å¯¹åº”äº†å‰é¢çš„ Object.wait()ã€‚</p> <h3 id="jhat"><a href="#jhat" class="header-anchor">#</a> jhat</h3> <blockquote><p><strong>jhat(JVM Heap Analysis Tool)ï¼Œæ˜¯è™šæ‹Ÿæœºå †è½¬å‚¨å¿«ç…§åˆ†æå·¥å…·</strong>ã€‚jhat ä¸ jmap æ­é…ä½¿ç”¨ï¼Œç”¨æ¥åˆ†æ jmap ç”Ÿæˆçš„ dump æ–‡ä»¶ã€‚jhat å†…ç½®äº†ä¸€ä¸ªå¾®å‹çš„ HTTP/HTML æœåŠ¡å™¨ï¼Œç”Ÿæˆ dump çš„åˆ†æç»“æœåï¼Œå¯ä»¥åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹ã€‚</p> <p>æ³¨æ„ï¼šä¸€èˆ¬ä¸ä¼šç›´æ¥åœ¨æœåŠ¡å™¨ä¸Šè¿›è¡Œåˆ†æï¼Œå› ä¸º jhat æ˜¯ä¸€ä¸ªè€—æ—¶å¹¶ä¸”è€—è´¹ç¡¬ä»¶èµ„æºçš„è¿‡ç¨‹ï¼Œä¸€èˆ¬æŠŠæœåŠ¡å™¨ç”Ÿæˆçš„ dump æ–‡ä»¶ï¼Œç”¨ jvisualvm ã€Eclipse Memory Analyzerã€IBM HeapAnalyzer ç­‰å·¥å…·æ¥åˆ†æã€‚</p></blockquote> <p>å‘½ä»¤æ ¼å¼ï¼š</p> <div class="language-shell extra-class"><pre class="language-shell"><code>jhat <span class="token punctuation">[</span>dumpfile<span class="token punctuation">]</span>
</code></pre></div><h3 id="jinfo"><a href="#jinfo" class="header-anchor">#</a> jinfo</h3> <blockquote><p><strong>jinfo(JVM Configuration info)ï¼Œæ˜¯ Java é…ç½®ä¿¡æ¯å·¥å…·</strong>ã€‚jinfo ç”¨äºå®æ—¶æŸ¥çœ‹å’Œè°ƒæ•´è™šæ‹Ÿæœºè¿è¡Œå‚æ•°ã€‚</p></blockquote> <p>ä¹‹å‰çš„ <code>jps -v</code> å£ä»¤åªèƒ½æŸ¥çœ‹åˆ°æ˜¾ç¤ºæŒ‡å®šçš„å‚æ•°ï¼Œå¦‚æœæƒ³è¦æŸ¥çœ‹æœªè¢«æ˜¾ç¤ºæŒ‡å®šçš„å‚æ•°çš„å€¼å°±è¦ä½¿ç”¨ jinfo å£ä»¤ã€‚</p> <p>å‘½ä»¤æ ¼å¼ï¼š</p> <div class="language-shell extra-class"><pre class="language-shell"><code>jinfo <span class="token punctuation">[</span>option<span class="token punctuation">]</span> pid
</code></pre></div><p>å¸¸ç”¨å‚æ•°ï¼š</p> <ul><li><code>option</code> - é€‰é¡¹å‚æ•°
<ul><li><code>-flag</code> - è¾“å‡ºæŒ‡å®š args å‚æ•°çš„å€¼</li> <li><code>-sysprops</code> - è¾“å‡ºç³»ç»Ÿå±æ€§ï¼Œç­‰åŒäº <code>System.getProperties()</code></li></ul></li></ul> <p>ã€ç¤ºä¾‹ã€‘</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ jinfo -sysprops <span class="token number">29527</span>
Attaching to process ID <span class="token number">29527</span>, please wait<span class="token punctuation">..</span>.
Debugger attached successfully.
Server compiler detected.
JVM version is <span class="token number">25.222</span>-b10
<span class="token punctuation">..</span>.
</code></pre></div><h2 id="ui-å·¥å…·"><a href="#ui-å·¥å…·" class="header-anchor">#</a> UI å·¥å…·</h2> <h3 id="jconsole"><a href="#jconsole" class="header-anchor">#</a> jconsole</h3> <blockquote><p><strong>jconsole(Java Monitoring and Management Console) æ˜¯ä¸€ç§åŸºäº JMX çš„å¯è§†åŒ–ç›‘è§†ä¸ç®¡ç†å·¥å…·</strong>ã€‚å®ƒçš„ç®¡ç†åŠŸèƒ½æ˜¯é’ˆå¯¹ JMX MBean è¿›è¡Œç®¡ç†ï¼Œç”±äº MBean å¯ä»¥ä½¿ç”¨ä»£ç ã€ä¸­é—´ä»¶æœåŠ¡å™¨çš„ç®¡ç†æ§åˆ¶å°æˆ–æ‰€æœ‰ç¬¦åˆ JMX è§„èŒƒçš„è½¯ä»¶è¿›è¡Œè®¿é—®ã€‚</p></blockquote> <blockquote><p>æ³¨æ„ï¼šä½¿ç”¨ jconsole çš„å‰ææ˜¯ Java åº”ç”¨å¼€å¯ JMXã€‚</p></blockquote> <h4 id="å¼€å¯-jmx"><a href="#å¼€å¯-jmx" class="header-anchor">#</a> å¼€å¯ JMX</h4> <p>Java åº”ç”¨å¼€å¯ JMX åï¼Œå¯ä»¥ä½¿ç”¨ <code>jconsole</code> æˆ– <code>jvisualvm</code> è¿›è¡Œç›‘æ§ Java ç¨‹åºçš„åŸºæœ¬ä¿¡æ¯å’Œè¿è¡Œæƒ…å†µã€‚</p> <p>å¼€å¯æ–¹æ³•æ˜¯ï¼Œåœ¨ java æŒ‡ä»¤åï¼Œæ·»åŠ ä»¥ä¸‹å‚æ•°ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token operator">-</span><span class="token class-name">Dcom</span><span class="token punctuation">.</span>sun<span class="token punctuation">.</span>management<span class="token punctuation">.</span>jmxremote<span class="token operator">=</span><span class="token boolean">true</span>
<span class="token operator">-</span><span class="token class-name">Dcom</span><span class="token punctuation">.</span>sun<span class="token punctuation">.</span>management<span class="token punctuation">.</span>jmxremote<span class="token punctuation">.</span>ssl<span class="token operator">=</span><span class="token boolean">false</span>
<span class="token operator">-</span><span class="token class-name">Dcom</span><span class="token punctuation">.</span>sun<span class="token punctuation">.</span>management<span class="token punctuation">.</span>jmxremote<span class="token punctuation">.</span>authenticate<span class="token operator">=</span><span class="token boolean">false</span>
<span class="token operator">-</span><span class="token class-name">Djava</span><span class="token punctuation">.</span>rmi<span class="token punctuation">.</span>server<span class="token punctuation">.</span>hostname<span class="token operator">=</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>
<span class="token operator">-</span><span class="token class-name">Dcom</span><span class="token punctuation">.</span>sun<span class="token punctuation">.</span>management<span class="token punctuation">.</span>jmxremote<span class="token punctuation">.</span>port<span class="token operator">=</span><span class="token number">18888</span>
</code></pre></div><ul><li><code>-Djava.rmi.server.hostname</code> - æŒ‡å®š Java ç¨‹åºè¿è¡Œçš„æœåŠ¡å™¨</li> <li><code>-Dcom.sun.management.jmxremote.port</code> - æŒ‡å®š JMX æœåŠ¡ç›‘å¬ç«¯å£</li></ul> <h4 id="è¿æ¥-jconsole"><a href="#è¿æ¥-jconsole" class="header-anchor">#</a> è¿æ¥ jconsole</h4> <p><img src="https://docs.oracle.com/javase/8/docs/technotes/guides/management/figures/connectadv.gif" alt="Connecting to a JMX Agent Using the JMX Service URL"></p> <p>è¿›å…¥ jconsole åº”ç”¨åï¼Œå¯ä»¥çœ‹åˆ°ä»¥ä¸‹ tab é¡µé¢ã€‚</p> <ul><li><code>æ¦‚è¿°</code> - æ˜¾ç¤ºæœ‰å…³ Java VM å’Œç›‘è§†å€¼çš„æ¦‚è¿°ä¿¡æ¯ã€‚</li> <li><code>å†…å­˜</code> - æ˜¾ç¤ºæœ‰å…³å†…å­˜ä½¿ç”¨çš„ä¿¡æ¯ã€‚å†…å­˜é¡µç›¸å½“äºå¯è§†åŒ–çš„ <code>jstat</code> å‘½ä»¤ã€‚</li> <li><code>çº¿ç¨‹</code> - æ˜¾ç¤ºæœ‰å…³çº¿ç¨‹ä½¿ç”¨çš„ä¿¡æ¯ã€‚</li> <li><code>ç±»</code> - æ˜¾ç¤ºæœ‰å…³ç±»åŠ è½½çš„ä¿¡æ¯ã€‚</li> <li><code>VM æ‘˜è¦</code> - æ˜¾ç¤ºæœ‰å…³ Java VM çš„ä¿¡æ¯ã€‚</li> <li><code>MBean</code> - æ˜¾ç¤ºæœ‰å…³ MBean çš„ä¿¡æ¯ã€‚</li></ul> <h3 id="jvisualvm"><a href="#jvisualvm" class="header-anchor">#</a> jvisualvm</h3> <blockquote><p><strong>jvisualvm(All-In-One Java Troubleshooting Tool) æ˜¯å¤šåˆä¸€æ•…éšœå¤„ç†å·¥å…·</strong>ã€‚å®ƒæ”¯æŒè¿è¡Œç›‘è§†ã€æ•…éšœå¤„ç†ã€æ€§èƒ½åˆ†æç­‰åŠŸèƒ½ã€‚</p></blockquote> <blockquote><p>æ³¨æ„ï¼šä½¿ç”¨ jconsole çš„å‰ææ˜¯ Java åº”ç”¨å¼€å¯ JMXã€‚</p></blockquote> <h3 id="mat"><a href="#mat" class="header-anchor">#</a> MAT</h3> <p>MAT å³ Eclipse Memory Analyzer Tool çš„ç¼©å†™ã€‚</p> <p>MAT å¯ä»¥ç‹¬ç«‹å®‰è£…ï¼ˆ<a href="http://www.eclipse.org/mat/downloads.php" target="_blank" rel="noopener noreferrer">å®˜æ–¹ä¸‹è½½åœ°å€<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ï¼‰ï¼Œä¹Ÿå¯ä»¥ä½œä¸º Eclipse IDE çš„æ’ä»¶å®‰è£…ã€‚</p> <h4 id="mat-é…ç½®"><a href="#mat-é…ç½®" class="header-anchor">#</a> MAT é…ç½®</h4> <p>MAT è§£å‹åï¼Œå®‰è£…ç›®å½•ä¸‹æœ‰ä¸ª <code>MemoryAnalyzer.ini</code> æ–‡ä»¶ã€‚</p> <p><code>MemoryAnalyzer.ini</code> ä¸­æœ‰ä¸ªé‡è¦çš„å‚æ•° <code>Xmx</code> è¡¨ç¤ºæœ€å¤§å†…å­˜ï¼Œé»˜è®¤ä¸ºï¼š<code>-vmargs -Xmx1024m</code></p> <p>å¦‚æœè¯•å›¾ç”¨ MAT å¯¼å…¥çš„ dump æ–‡ä»¶è¶…è¿‡ 1024 Mï¼Œä¼šæŠ¥é”™ï¼š</p> <div class="language-shell extra-class"><pre class="language-shell"><code>An internal error occurred during: <span class="token string">&quot;Parsing heap dump from XXX&quot;</span>
</code></pre></div><p>æ­¤æ—¶ï¼Œå¯ä»¥é€‚å½“è°ƒæ•´ <code>Xmx</code> å¤§å°ã€‚å¦‚æœè®¾ç½®çš„ <code>Xmx</code> æ•°å€¼è¿‡å¤§ï¼Œæœ¬æœºå†…å­˜ä¸è¶³ä»¥æ”¯æ’‘ï¼Œå¯åŠ¨ MAT ä¼šæŠ¥é”™ï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>Failed to create the Java Virtual Machine
</code></pre></div><h4 id="mat-åˆ†æ"><a href="#mat-åˆ†æ" class="header-anchor">#</a> MAT åˆ†æ</h4> <p><img src="http://dunwu.test.upcdn.net/snap/20200308092746.png" alt="img"></p> <p>ç‚¹å‡» Leak Suspects å¯ä»¥è¿›å…¥å†…å­˜æ³„æ¼é¡µé¢ã€‚</p> <p>ï¼ˆ1ï¼‰é¦–å…ˆï¼Œå¯ä»¥æŸ¥çœ‹é¥¼å›¾äº†è§£å†…å­˜çš„æ•´ä½“æ¶ˆè€—æƒ…å†µ</p> <p><img src="http://dunwu.test.upcdn.net/snap/20200308150556.png" alt="img"></p> <p>ï¼ˆ2ï¼‰ç¼©å°èŒƒå›´ï¼Œå¯»æ‰¾é—®é¢˜ç–‘ä¼¼ç‚¹</p> <p><img src="https://img-blog.csdn.net/20160223202154818" alt="img"></p> <p>å¯ä»¥ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µé¢ï¼Œåœ¨è¯¦æƒ…é¡µé¢ Shortest Paths To the Accumulation Point è¡¨ç¤º GC root åˆ°å†…å­˜æ¶ˆè€—èšé›†ç‚¹çš„æœ€çŸ­è·¯å¾„ï¼Œå¦‚æœæŸä¸ªå†…å­˜æ¶ˆè€—èšé›†ç‚¹æœ‰è·¯å¾„åˆ°è¾¾ GC rootï¼Œåˆ™è¯¥å†…å­˜æ¶ˆè€—èšé›†ç‚¹ä¸ä¼šè¢«å½“åšåƒåœ¾è¢«å›æ”¶ã€‚</p> <p>ä¸ºäº†æ‰¾åˆ°å†…å­˜æ³„éœ²ï¼Œæˆ‘è·å–äº†ä¸¤ä¸ªå †è½¬å‚¨æ–‡ä»¶ï¼Œä¸¤ä¸ªæ–‡ä»¶è·å–æ—¶é—´é—´éš”æ˜¯ä¸€å¤©ï¼ˆå› ä¸ºå†…å­˜åªæ˜¯å°å¹…åº¦å¢é•¿ï¼ŒçŸ­æ—¶é—´å¾ˆéš¾å‘ç°é—®é¢˜ï¼‰ã€‚å¯¹æ¯”ä¸¤ä¸ªæ–‡ä»¶çš„å¯¹è±¡ï¼Œé€šè¿‡å¯¹æ¯”åçš„ç»“æœå¯ä»¥å¾ˆæ–¹ä¾¿å®šä½å†…å­˜æ³„éœ²ã€‚</p> <p>MAT åŒæ—¶æ‰“å¼€ä¸¤ä¸ªå †è½¬å‚¨æ–‡ä»¶ï¼Œåˆ†åˆ«æ‰“å¼€ Histogramï¼Œå¦‚ä¸‹å›¾ã€‚åœ¨ä¸‹å›¾ä¸­æ–¹æ¡† 1 æŒ‰é’®ç”¨äºå¯¹æ¯”ä¸¤ä¸ª Histogramï¼Œå¯¹æ¯”ååœ¨æ–¹æ¡† 2 å¤„é€‰æ‹© Group By packageï¼Œç„¶åå¯¹æ¯”å„å¯¹è±¡çš„å˜åŒ–ã€‚ä¸éš¾å‘ç° heap3.hprof æ¯” heap6.hprof å°‘äº† 64 ä¸ª eventInfo å¯¹è±¡ï¼Œå¦‚æœå¯¹ä»£ç æ¯”è¾ƒç†Ÿæ‚‰çš„è¯æƒ³å¿…è¿™æ ·ä¸€ä¸ªç»“æœæ˜¯èƒ½å¤Ÿç»™ç¨‹åºå‘˜ä¸€å®šçš„å¯ç¤ºçš„ã€‚è€Œæˆ‘ä¹Ÿæ˜¯æ ¹æ®è¿™ä¸ªå¯ç¤ºå·®æ‰¾åˆ°äº†æœ€ç»ˆå†…å­˜æ³„éœ²çš„ä½ç½®ã€‚
<img src="https://img-blog.csdn.net/20160223203226362" alt="img"></p> <h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="header-anchor">#</a> å‚è€ƒèµ„æ–™</h2> <ul><li><a href="https://item.jd.com/11252778.html" target="_blank" rel="noopener noreferrer">ã€Šæ·±å…¥ç†è§£ Java è™šæ‹Ÿæœºã€‹<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://my.oschina.net/feichexia/blog/196575" target="_blank" rel="noopener noreferrer">JVM æ€§èƒ½è°ƒä¼˜ç›‘æ§å·¥å…· jpsã€jstackã€jmapã€jhatã€jstatã€hprof ä½¿ç”¨è¯¦è§£<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://docs.oracle.com/javase/8/docs/technotes/guides/management/jconsole.html" target="_blank" rel="noopener noreferrer">jconsole å®˜æ–¹æ–‡æ¡£<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.cnblogs.com/kongzhongqijing/articles/3621441.html" target="_blank" rel="noopener noreferrer">jconsole å·¥å…·ä½¿ç”¨<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.cnblogs.com/yjd_hycf_space/p/7755633.html" target="_blank" rel="noopener noreferrer">jstat å‘½ä»¤æŸ¥çœ‹ jvm çš„ GC æƒ…å†µ<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://blog.csdn.net/wanghuiqi2008/article/details/50724676" target="_blank" rel="noopener noreferrer">åˆ©ç”¨å†…å­˜åˆ†æå·¥å…·ï¼ˆMemory Analyzer Toolï¼ŒMATï¼‰åˆ†æ java é¡¹ç›®å†…å­˜æ³„éœ²<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/dunwu/javacore/edit/master/docs/jvm/jvm-tools.md" target="_blank" rel="noopener noreferrer">å¸®åŠ©æˆ‘ä»¬æ”¹å–„æ­¤é¡µé¢ï¼</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <!----> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/javacore/assets/js/app.c30588b9.js" defer></script><script src="/javacore/assets/js/4.c9a192fb.js" defer></script><script src="/javacore/assets/js/60.40115a87.js" defer></script><script src="/javacore/assets/js/5.5c1b0512.js" defer></script>
  </body>
</html>
